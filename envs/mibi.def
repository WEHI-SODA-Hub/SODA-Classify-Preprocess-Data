bootstrap: docker
from: mambaorg/micromamba:1.5.8-bookworm-slim

%files
  environment.yml /opt

%post
  micromamba install -y -q -n base --file /opt/environment.yml
  micromamba clean -ay
  /opt/conda/bin/python -m ipykernel install --sys-prefix

%environment
  # use posix shell hooks
  eval "$(micromamba shell hook -s posix)"
  micromamba activate base
  export LD_LIBRARY_PATH=/opt/conda/lib:"$LD_LIBRARY_PATH"

%labels
  Author yang.e@wehi.edu.au
  Version v0.2
  XGBOOST_VERSION 1.6.2

%help
  This container is used in the MIBI pipeline to preprocess training data,
  train an XGBoost model, and apply the trained model.
